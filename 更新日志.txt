
2020.5.9新增: 

现在关卡程序可以独立于pvz_config（配置文件）之外，自己写好关卡的python程序之后，
和游戏主程序exe放在一个地方，然后在pvz_config最下面的stage_file名字改成
你写的关卡文件名，
记得加上文件后缀。与此相似地，如果有批量修改植物和僵尸或者其他参数的需求，也可以单独写一个python程序文件，
然后把pvz_config文件最下面的modified_file从None改成你写的程序文件名就行。



2020.5.14新增：

目前已经把pvz极简版的代码结构全部调整好了，现在的游戏文件夹里有一个植物脚本文件夹plant_scripts， 
里面每一
个脚本都是专属一个植物的，与之同理也有僵尸脚本文件夹zombie_scripts，现在大家自制植物写算法会非常方便，
 直接写一个新的植
物脚本即可。

我目前还原了一些β版特性的植物，比如十字火爆辣椒，爆炸坚果，
（为了区分原版植物，图片可能稍有不同） 以及我发
现一些二代的植物其实特性还挺有意思，所以也开始还原一部分二代的植物，
目前已经做完了番薯，能够吸引前方1x3的相邻行的僵尸到
自己的行， 并且自己有着与坚果墙同等级的防御力。已经更新到公开版本。

小游戏部分，已经做好了锤僵尸和我是僵尸。



2020.5.18新增: 

增加了查看一个格子上有哪些僵尸的功能，以防止多只僵尸重叠在一个格子上时不知道有几个僵尸以及具体是
哪些僵尸
的问题。在pvz_config.py里面的show_zombies如果设为True,在游戏里点击某个格子，如果这个格子上有僵尸，下方的
信息栏就会显示
当前的格子上具体有哪些僵尸，每种僵尸有几只。
（比如：第1行第2列的格子上有2只普通僵尸，1只铁桶僵尸）

如果show_zombies设为False，那么点击格子就不会显示这些僵尸的信息。



2020.5.20新增：

增加火焰豌豆溅射伤害判定。

完成了植物和僵尸图鉴程序。

增加游戏中点击有植物的格子上会同时显示植物生命值的功能。

增加游戏里选择关卡的功能。


新做了几个植物，神奇花芽，随机豌豆射手，寒冰射手。其中寒冰射手过火炬树桩时的算法我提供了两个版本，
在plant_scripts文件夹里的火炬树桩.py里有两个函数，
有normal的那个会把冰豌豆和原版一样处理，也就是变成普通豌豆，
另一个是仍然保持冰豌豆的特性，并且攻击力也会加倍。


修正了小游戏读取脚本的中文编码不兼容的问题。

新增了游戏中的关卡名显示。

新增了每个植物的information属性，information是一个植物的介绍文档，这个植物的特性和图鉴小故事都可以写在这里，
打开图鉴选择植物就能看到。

2020.5.24新增：

写完了舞王僵尸的完整脚本，包括正常闯关下和小游戏我是僵尸里的两个版本。

原先僵尸的移动速度参数move_speed的单位从毫秒更换为秒，因为为了更好地控制游戏暂停以及继续游戏时僵尸的移动而取消了
原来使用的after函数（接收时间单位为毫秒），换成了每次从游戏主体得到当前的准确时间，并且僵尸自身在初始化的时候
也会存有一个自己的时间，通过两个时间之差与移动速度的比较即可准确地控制僵尸的移动。至于更多的细节处理，请大家
好好看游戏主程序以及僵尸脚本的代码。

当show_zombies设置为True的时候，如果僵尸和植物都在同一个格子上，现在会同时显示僵尸和植物的信息，分两行显示，
上面一行是僵尸的信息，下面一行是植物的信息。

当僵尸的生命值减少到0或者0以下的时候，原本是直接判定status为0（代表僵尸被打败了），现在修改为判定status为0之后
会最后把僵尸的eachtime_func再运行一次，因此如果僵尸在被打败的时候要做什么事情，这个时候就可以在他的脚本的
eachtime_func里面写上当hp <= 0的条件下要做什么。比如舞王僵尸在被打败的时候，需要让伴舞伴僵尸的start_func,
eachtime_func和repause_func变成和普通僵尸一样，在被打败之前是受舞王和其他舞伴僵尸的步伐制约的自己的几个函数，
详情请看舞王僵尸的脚本。

2020.5.28新增：

把计划中的关卡制作器的代码写完了，做成了exe文件，兼容64位和32位。大家如果想做自己的关卡，就打开关卡制作器.exe
按照里面的说明来定制自己想要的关卡，全部编辑完成后请点击左上角的“生成关卡脚本”按钮即可生成一个关卡代码的脚本，
生成位置在游戏文件夹里的stages文件夹里。请确保输入的僵尸种类，数值类型是正常的，比如僵尸种类需要在zombie_scripts
里有对应的脚本文件，行列数需要是正整数，出现时间需要是大于等于0的数等等。这些东西在这个关卡制作器里并不会
检查，但是如果这些值有问题，游戏里这个关卡应该会运行不了。这个关卡制作器提供两种编辑僵尸的模式，
一个是随机选择僵尸模式，另一个是一个一个地编辑的模式，大家可以在每一部分自己选择想要的模式。

2020.5.30新增：

关卡制作器新加入了随机模式下具体设置每种僵尸的出现概率的功能。

制作了两个新的原创的植物，坚果小队和自定义传送门。这两种原创植物的特性请到plant_scripts文件夹里相应的植物脚本文件查看，
在脚本文件的上面有植物的介绍文档。

2020.6.1新增:

新增了游戏中的设置按钮，在游戏中点击设置按钮，会弹出一个设置窗口，里面可以调整我目前写好的可以设置的游戏参数。
目前可以在设置窗口里调整游戏的背景音乐的音量，音效的音量，以及改变当前的背景音乐。后续会加入更多可以设置的功能，
也在考虑之后加入一个作弊码输入框，可以输入代码改变游戏里的一些参数。

2020.6.3新增：

改变了游戏里通关后的游戏行为，之前是经过7秒自动关闭游戏窗口，现在改成了播放通关音乐，然后弹出一个窗口问是否要回到
主界面重新选择关卡和植物继续玩，或者退出游戏。按弹出的窗口上对应的按钮就可以实现操作。

游戏里的设置窗口新增了在游戏过程中随时可以点击返回主界面的按钮。

调整了传送门的植物特性以平衡游戏难度（之前的传送门不会被吃，也不会消失，只要放下去不铲除就一直在当前关卡里有效），
现在每个传送门限时150秒，每个传送门放置150秒之后会自动消失。

写完了香蒲的植物脚本，我为这个极简版的香蒲写了寻找当前距离最近的僵尸以及独特的自动寻路路线，
并且在我写的香蒲逻辑算法之下，香蒲的刺不会伤害溢出，也就是说没有击中目标僵尸的香蒲的刺还是可以攻击到其他的僵尸，
只要在路上碰到即可（和豌豆射手的豌豆一个道理）。

2020.6.5新增：

重新整理了游戏文件夹里的文件，把很多没用的资源文件删除了，并且把音乐资源文件个别占空间大的进行了压缩，使其文件大小更小。
现在整个游戏文件夹的所有文件合起来只有30MB左右，相比原版的游戏文件夹有189MB的大小，这个极简版的大小只有不到原版的六分之一，
也终于算是在游戏大小上做到了极简。

继续调整强化了设置窗口里的背景音乐替换功能，可以改变选植物（主界面）的背景音乐和战斗时的背景音乐，按照当下你在哪一个场景来决定。
通过更改的按钮可以自己选择背景音乐的文件路径，第一次选择完成后，主程序会帮你自动生成你当前选择的音乐文件的路径的记忆文件在游戏
文件夹里，下一次选择背景音乐，主程序会自动转到你上次选择背景音乐的那个文件夹的路径下，方便你选择上次的路径下的其他音乐。

修复了会让僵尸换行的植物出现的bug，比如大蒜和番薯。

简化了主程序在打开的时候加载植物的图片（供选择植物用）的步骤，之前是通过从植物脚本文件夹里只导入植物的图片路径参数，
现在直接从资源文件夹里提取植物的同名图片，避免了从脚本里import这种相对比较浪费资源的步骤。（也正因如此，现在所有植物
的图片路径参数img都必须设置为植物名.png）

2020.6.7新增：

修复了玉米投手的黄油部分的bug。

为香蒲的脚本的刺的寻路算法多加了一些边缘检测，以对付一些特殊的游戏情况。

新写了一个小游戏“枪林弹雨”，目前还在初步开发阶段，玩家用键盘的WSAD控制一个豌豆射手的上下左右的移动，按J发射豌豆，
（攻击力和正常的一样）攻击从右边过来的僵尸。

修复了图鉴程序里的一处小bug。

2020.6.10新增：

新写了传送带类型，现在玩家可以自己创建一个传送带在一个小游戏或者一个关卡里（关卡部分暂时还没有写主程序的处理部分，之后加上），
目前已经写了一个小游戏“传送带测试”，专门来测试新写的传送带类型。传送带有很多参数，唯一一个必需写的参数就是从哪些植物
里选择传送带出来的植物，这个参数是一个植物的列表。其他的参数都有默认值，玩家・也可以自行调整。

2020.6.11新增：

继续改善传送带的可定制程度和边缘检测。

新写了荷叶的脚本，并且给植物类加上了土地类型检测参数，这个参数是一个列表，里面可以是土地类型名，或者是一个检查当前想要种植的
格子是否符合这个植物的具体的种植条件的函数。比如荷叶只能种在水上，陆生植物和香蒲只能靠荷叶种在水上。关于荷叶的脚本，
新增了一个概念，contained_plants，也就是这个植物所包含的植物，比如一个荷叶上有一个豌豆射手，那么这个荷叶所包含的植物就是
这个豌豆射手。在荷叶所包含的植物不为空时（也就是说荷叶上面有种植物时），荷叶的主循环函数需要预先让所包含的植物的主循环函数运行，
并且在被啃咬的时候，也是预先让所包含的植物被啃咬。如果为空的时候，荷叶本身就是一个正常的植物。

2020.6.12新增：

新写了一个水池预设关卡，中间两行是水池。这里提一下目前游戏里预设的土地类型：day(白天草地),pool(水池),empty(空土地)，之后会陆续加入
night(夜晚土地),roof(屋顶)以及其他的新的土地类型。

继续改善荷叶和香蒲还有陆生植物的土地类型判断部分以及荷叶上有植物时的处理。

2020.6.14新增：

修复了窝瓜压僵尸后恢复土地图片的类型选择的bug。

准备把所有植物和僵尸的图片素材都换成透明的，img_transparent（图片透明背景处理）参数都设置为True。

在主程序里通过一个关卡之后（或者中途通过设置界面返回）回到主界面的时候的处理部分好好地完善了一下，
多加了一些默认游戏内部变量的预先存储，在回到主界面的时候都进行默认值重新赋值，这样每一个关卡如果用了
修改植物或者僵尸的参数的脚本，或者关卡里让僵尸的参数临时变化，或者关卡的地图是独立设计的等等的情况，
就不会影响到另外一个关卡。这样每个关卡就是完全独立的，当通过一个关卡或者在中途通过设置窗口返回主界面时
所有的游戏参数都会重置回默认的值，不会影响到下一个关卡的游戏参数的使用和调整。

准备在游戏中的设置窗口中添加一个密码（作弊码）输入框，可以通过一些密码让玩家得到游戏里的某些参数的改变，
包括植物，僵尸的参数以及游戏里的其他参数。也在考虑可以直接输入python代码来进行改变游戏里的参数，
不过可能会用ast.literal_eval来运行输入到密码框里的python代码，相对来说安全一些。

对关卡脚本里的僵尸的预处理脚本common.py做了一些调整，每次进入一个新的关卡，在导入关卡里会出现的僵尸
都会对僵尸列表进行deepcopy，这样每次导入的僵尸就不会对另一个新的关卡的僵尸造成影响。
